{{!
    @template theme_cmagistratura/core_course_coursecard
    Refactored course card to match Institutional Theme design.
}}
<div class="card dashboard-card h-100 border-0 shadow-sm rounded-lg overflow-hidden position-relative group" role="listitem"
    data-region="course-content"
    data-course-id="{{{id}}}">
    
    <div class="card-img-top-wrapper position-relative overflow-hidden" style="height: 176px;"> <!-- h-44 equivalent -->
        <a href="{{{viewurl}}}" tabindex="-1" class="d-block w-100 h-100">
            <div class="card-img w-100 h-100" 
                 style="background-image: url({{{courseimage}}}); background-size: cover; background-position: center; transition: transform 0.5s ease;">
                <span class="sr-only">{{{fullname}}}</span>
            </div>
        </a>
        {{#coursecategory}}
        <div class="category-badge position-absolute" style="top: 12px; left: 12px; z-index: 10;">
            <span class="badge badge-category-{{{coursecategory}}} text-uppercase font-weight-bold py-1 px-2 text-white" style="font-size: 10px; letter-spacing: 0.05em; border-radius: 4px; backdrop-filter: blur(4px);">
                {{{coursecategory}}}
            </span>
        </div>
        {{/coursecategory}}
    </div>

    <div class="card-body d-flex flex-column p-4">
        <h3 class="card-title h5 font-weight-bold mb-3">
            <a href="{{{viewurl}}}" class="text-dark text-decoration-none stretched-link-title">
                {{{fullname}}}
            </a>
        </h3>
        
        <div class="mt-auto w-100">
            {{#hasprogress}}
            <div class="progress-wrapper mb-3">
                <div class="d-flex justify-content-between align-items-center mb-1 text-muted" style="font-size: 11px; font-weight: 500;">
                    <span>{{#str}}completion, core_completion{{/str}}</span>
                    <span class="text-primary">{{{progress}}}%</span>
                </div>
                <div class="progress" style="height: 6px; border-radius: 10px;">
                    <div class="progress-bar bg-primary rounded-pill" role="progressbar" 
                         style="width: {{{progress}}}%;" 
                         aria-valuenow="{{{progress}}}" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>
            {{/hasprogress}}
            
            <a href="{{{viewurl}}}" class="btn btn-primary btn-block font-weight-bold py-2 shadow-sm" style="font-size: 0.875rem;">
                {{#str}}view{{/str}}
            </a>
        </div>
    </div>
</div>